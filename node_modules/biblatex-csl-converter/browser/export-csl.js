!function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function i(t){return new nt(t).init()}var a="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},r=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},n=function(t){return Object(r(t))},o={}.hasOwnProperty,l=function(t,e){return o.call(t,e)},s={}.toString,u=function(t){return s.call(t).slice(8,-1)},d=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==u(t)?t.split(""):Object(t)},b=function(t){return d(r(t))},p=Math.ceil,c=Math.floor,f=function(t){return isNaN(t=+t)?0:(t>0?c:p)(t)},g=Math.min,h=function(t){return t>0?g(f(t),9007199254740991):0},m=Math.max,y=Math.min,v=function(t,e){return t=f(t),t<0?m(t+e,0):y(t,e)},x=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),k=x["__core-js_shared__"]||(x["__core-js_shared__"]={}),_=0,w=Math.random(),j=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++_+w).toString(36))},S=function(t){return k[t]||(k[t]={})}("keys"),q=function(t){return function(e,i,a){var r,n=b(e),o=h(n.length),l=v(a,o);if(t&&i!=i){for(;o>l;)if((r=n[l++])!=r)return!0}else for(;o>l;l++)if((t||l in n)&&n[l]===i)return t||l||0;return!t&&-1}}(!1),O=function(t){return S[t]||(S[t]=j(t))}("IE_PROTO"),E=function(t,e){var i,a=b(t),r=0,n=[];for(i in a)i!=O&&l(a,i)&&n.push(i);for(;e.length>r;)l(a,i=e[r++])&&(~q(n,i)||n.push(i));return n},I="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),T=Object.keys||function(t){return E(t,I)},z=e(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),P=(z.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),R=function(t,e,i){if(P(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,a){return t.call(e,i,a)};case 3:return function(i,a,r){return t.call(e,i,a,r)}}return function(){return t.apply(e,arguments)}},D=function(t){return"object"==typeof t?null!==t:"function"==typeof t},M=function(t){if(!D(t))throw TypeError(t+" is not an object!");return t},B=function(t){try{return!!t()}catch(t){return!0}},C=!B(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),A=x.document,L=D(A)&&D(A.createElement),N=function(t){return L?A.createElement(t):{}},U=!C&&!B(function(){return 7!=Object.defineProperty(N("div"),"a",{get:function(){return 7}}).a}),F=function(t,e){if(!D(t))return t;var i,a;if(e&&"function"==typeof(i=t.toString)&&!D(a=i.call(t)))return a;if("function"==typeof(i=t.valueOf)&&!D(a=i.call(t)))return a;if(!e&&"function"==typeof(i=t.toString)&&!D(a=i.call(t)))return a;throw TypeError("Can't convert object to primitive value")},G=Object.defineProperty,K={f:C?Object.defineProperty:function(t,e,i){if(M(t),e=F(e,!0),M(i),U)try{return G(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},H=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},V=C?function(t,e,i){return K.f(t,e,H(1,i))}:function(t,e,i){return t[e]=i,t},Z=function(t,e,i){var a,r,n,o=t&Z.F,s=t&Z.G,u=t&Z.S,d=t&Z.P,b=t&Z.B,p=t&Z.W,c=s?z:z[e]||(z[e]={}),f=c.prototype,g=s?x:u?x[e]:(x[e]||{}).prototype;s&&(i=e);for(a in i)(r=!o&&g&&void 0!==g[a])&&l(c,a)||(n=r?g[a]:i[a],c[a]=s&&"function"!=typeof g[a]?i[a]:b&&r?R(n,x):p&&g[a]==n?function(t){var e=function(e,i,a){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,a)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(n):d&&"function"==typeof n?R(Function.call,n):n,d&&((c.virtual||(c.virtual={}))[a]=n,t&Z.R&&f&&!f[a]&&V(f,a,n)))};Z.F=1,Z.G=2,Z.S=4,Z.P=8,Z.B=16,Z.W=32,Z.U=64,Z.R=128;var $=Z;!function(t,e){var i=(z.Object||{})[t]||Object[t],a={};a[t]=e(i),$($.S+$.F*B(function(){i(1)}),"Object",a)}("keys",function(){return function(t){return T(n(t))}});var W=z.Object.keys,J=t(e(function(t){t.exports={default:W,__esModule:!0}})),Y=t(e(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));$($.S+$.F*!C,"Object",{defineProperty:K.f});var Q=z.Object,X=function(t,e,i){return Q.defineProperty(t,e,i)},tt=e(function(t){t.exports={default:X,__esModule:!0}});t(tt);var et=t(e(function(t,e){e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(tt);e.default=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}()})),it=["catalan","croatian","czech","danish","dutch","english","american","finnish","french","german","greek","italian","latin","norwegian","polish","portuguese","brazilian","russian","slovene","spanish","swedish"],at={abstract:{type:"f_long_literal",biblatex:"abstract",csl:"abstract"},addendum:{type:"f_literal",biblatex:"addendum"},afterword:{type:"l_name",biblatex:"afterword"},annotation:{type:"f_long_literal",biblatex:"annotation"},annotator:{type:"l_name",biblatex:"annotator"},author:{type:"l_name",biblatex:"author",csl:"author"},bookauthor:{type:"l_name",biblatex:"bookauthor",csl:"container-author"},bookpagination:{type:"f_key",biblatex:"bookpagination",options:["page","column","section","paragraph","verse","line"]},booksubtitle:{type:"f_title",biblatex:"booksubtitle"},booktitle:{type:"f_title",biblatex:"booktitle",csl:"container-title"},booktitleaddon:{type:"f_title",biblatex:"booktitleaddon"},chapter:{type:"f_literal",biblatex:"chapter",csl:"chapter-number"},commentator:{type:"l_name",biblatex:"commentator"},date:{type:"f_date",biblatex:"date",csl:"issued"},doi:{type:"f_verbatim",biblatex:"doi",csl:"DOI"},edition:{type:"f_integer",biblatex:"edition",csl:"edition"},editor:{type:"l_name",biblatex:"editor",csl:"editor"},editora:{type:"l_name",biblatex:"editora"},editorb:{type:"l_name",biblatex:"editorb"},editorc:{type:"l_name",biblatex:"editorc"},editortype:{type:"f_key",biblatex:"editortype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},editoratype:{type:"f_key",biblatex:"editoratype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},editorbtype:{type:"f_key",biblatex:"editorbtype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},editorctype:{type:"f_key",biblatex:"editorctype",options:["editor","compiler","founder","continuator","redactor","reviser","collaborator"]},eid:{type:"f_literal",biblatex:"eid"},entrysubtype:{type:"f_literal",biblatex:"entrysubtype"},eprint:{type:"f_verbatim",biblatex:"eprint"},eprintclass:{type:"f_literal",biblatex:"eprintclass"},eprinttype:{type:"f_literal",biblatex:"eprinttype"},eventdate:{type:"f_date",biblatex:"eventdate",csl:"event-date"},eventtitle:{type:"f_title",biblatex:"eventtitle",csl:"event"},file:{type:"f_verbatim",biblatex:"file"},foreword:{type:"l_name",biblatex:"foreword"},holder:{type:"l_name",biblatex:"holder"},howpublished:{type:"f_literal",biblatex:"howpublished",csl:"medium"},indextitle:{type:"f_literal",biblatex:"indextitle"},institution:{type:"l_literal",biblatex:"institution"},introduction:{type:"l_name",biblatex:"introduction"},isan:{type:"f_literal",biblatex:"isan"},isbn:{type:"f_literal",biblatex:"isbn",csl:"ISBN"},ismn:{type:"f_literal",biblatex:"ismn"},isrn:{type:"f_literal",biblatex:"isrn"},issn:{type:"f_literal",biblatex:"issn",csl:"ISSN"},issue:{type:"f_literal",biblatex:"issue",csl:"issue"},issuesubtitle:{type:"f_literal",biblatex:"issuesubtitle"},issuetitle:{type:"f_literal",biblatex:"issuetitle"},iswc:{type:"f_literal",biblatex:"iswc"},journalsubtitle:{type:"f_literal",biblatex:"journalsubtitle"},journaltitle:{type:"f_literal",biblatex:"journaltitle",csl:"container-title"},keywords:{type:"l_tag",biblatex:"keywords"},label:{type:"f_literal",biblatex:"label"},language:{type:"l_key",biblatex:"language",options:it},langid:{type:"f_key",strict:!0,biblatex:"langid",csl:"language",options:{acadian:{csl:"fr-CA",biblatex:"acadian"},afrikaans:{csl:"af-ZA",biblatex:"afrikaans"},arabic:{csl:"ar",biblatex:"arabic"},basque:{csl:"eu",biblatex:"basque"},bulgarian:{csl:"bg-BG",biblatex:"bulgarian"},catalan:{csl:"ca-AD",biblatex:"catalan"},chinese:{csl:"zh-CN",biblatex:"pinyin"},croatian:{csl:"hr-HR",biblatex:"croatian"},czech:{csl:"cs-CZ",biblatex:"czech"},danish:{csl:"da-DK",biblatex:"danish"},dutch:{csl:"nl-NL",biblatex:"dutch"},auenglish:{csl:"en-GB",biblatex:"australian"},caenglish:{csl:"en-US",biblatex:"canadian"},nzenglish:{csl:"en-GB",biblatex:"newzealand"},ukenglish:{csl:"en-GB",biblatex:"ukenglish"},usenglish:{csl:"en-US",biblatex:"usenglish"},estonian:{csl:"et-EE",biblatex:"estonian"},finnish:{csl:"fi-FI",biblatex:"finnish"},french:{csl:"fr-FR",biblatex:"french"},cafrench:{csl:"fr-CA",biblatex:"canadien"},german:{csl:"de-DE",biblatex:"ngerman"},atgerman:{csl:"de-AT",biblatex:"naustrian"},greek:{csl:"el-GR",biblatex:"greek"},hebrew:{csl:"he-IL",biblatex:"hebrew"},hungarian:{csl:"hu-HU",biblatex:"hungarian"},icelandic:{csl:"is-IS",biblatex:"icelandic"},italian:{csl:"it-IT",biblatex:"italian"},japanese:{csl:"ja-JP",biblatex:"japanese"},latin:{csl:"la",biblatex:"latin"},latvian:{csl:"lv-LV",biblatex:"latvian"},lithuanian:{csl:"lt-LT",biblatex:"lithuanian"},magyar:{csl:"hu-HU",biblatex:"magyar"},mongolian:{csl:"mn-MN",biblatex:"mongolian"},norwegian:{csl:"nb-NO",biblatex:"norsk"},newnorwegian:{csl:"nn-NO",biblatex:"nynorsk"},farsi:{csl:"fa-IR",biblatex:"farsi"},polish:{csl:"pl-PL",biblatex:"polish"},portuguese:{csl:"pt-PT",biblatex:"portuguese"},brportuguese:{csl:"pt-BR",biblatex:"brazilian"},romanian:{csl:"ro-RO",biblatex:"romanian"},russian:{csl:"ru-RU",biblatex:"russian"},serbian:{csl:"sr-RS",biblatex:"serbian"},cyrillicserbian:{csl:"sr-RS",biblatex:"serbianc"},slovak:{csl:"sk-SK",biblatex:"slovak"},slovene:{csl:"sl-SL",biblatex:"slovene"},spanish:{csl:"es-ES",biblatex:"spanish"},swedish:{csl:"sv-SE",biblatex:"swedish"},thai:{csl:"th-TH",biblatex:"thai"},turkish:{csl:"tr-TR",biblatex:"turkish"},ukrainian:{csl:"uk-UA",biblatex:"ukrainian"},vietnamese:{csl:"vi-VN",biblatex:"vietnamese"}}},library:{type:"f_literal",biblatex:"library"},location:{type:"l_literal",biblatex:"location",csl:"publisher-place"},mainsubtitle:{type:"f_title",biblatex:"mainsubtitle"},maintitle:{type:"f_title",biblatex:"maintitle"},maintitleaddon:{type:"f_title",biblatex:"maintitleaddon"},nameaddon:{type:"f_literal",biblatex:"nameaddon"},note:{type:"f_literal",biblatex:"note",csl:"note"},number:{type:"f_literal",biblatex:"number",csl:"number"},organization:{type:"l_literal",biblatex:"organization"},origdate:{type:"f_date",biblatex:"origdate",csl:"original-date"},origlanguage:{type:"f_key",biblatex:"origlanguage",options:it},origlocation:{type:"l_literal",biblatex:"origlocation",csl:"original-publisher-place"},origpublisher:{type:"l_literal",biblatex:"origpublisher",csl:"original-publisher"},origtitle:{type:"f_title",biblatex:"origtitle",csl:"original-title"},pages:{type:"l_range",biblatex:"pages",csl:"page"},pagetotal:{type:"f_literal",biblatex:"pagetotal",csl:"number-of-pages"},pagination:{type:"f_key",biblatex:"pagination",options:["page","column","section","paragraph","verse","line"]},part:{type:"f_literal",biblatex:"part"},publisher:{type:"l_literal",biblatex:"publisher",csl:"publisher"},pubstate:{type:"f_key",biblatex:"pubstate",csl:"status",options:{inpreparation:{csl:"in preparation",biblatex:"inpreparation"},submitted:{csl:"submitted",biblatex:"submitted"},forthcoming:{csl:"forthcoming",biblatex:"forthcoming"},inpress:{csl:"in press",biblatex:"inpress"},prepublished:{csl:"prepublished",biblatex:"prepublished"}}},reprinttitle:{type:"f_literal",biblatex:"reprinttitle"},series:{type:"f_literal",biblatex:"series",csl:"collection-title"},shortauthor:{type:"l_name",biblatex:"shortauthor"},shorteditor:{type:"l_name",biblatex:"shorteditor"},shorthand:{type:"f_literal",biblatex:"shorthand"},shorthandintro:{type:"f_literal",biblatex:"shorthandintro"},shortjournal:{type:"f_literal",biblatex:"shortjournal",csl:"container-title-short"},shortseries:{type:"f_literal",biblatex:"shortseries"},shorttitle:{type:"f_literal",biblatex:"shorttitle",csl:"title-short"},subtitle:{type:"f_title",biblatex:"subtitle"},title:{type:"f_title",biblatex:"title",csl:"title"},titleaddon:{type:"f_title",biblatex:"titleaddon"},translator:{type:"l_name",biblatex:"translator",csl:"translator"},type:{type:"f_key",biblatex:"type",options:["manual","patent","report","thesis","mathesis","phdthesis","candthesis","techreport","resreport","software","datacd","audiocd"]},url:{type:"f_uri",biblatex:"url",csl:"URL"},urldate:{type:"f_date",biblatex:"urldate",csl:"accessed"},venue:{type:"f_literal",biblatex:"venue",csl:"event-place"},version:{type:"f_literal",biblatex:"version",csl:"version"},volume:{type:"f_literal",biblatex:"volume",csl:"volume"},volumes:{type:"f_literal",biblatex:"volumes",csl:"number-of-volumes"}},rt={article:{order:1,biblatex:"article",csl:"article",required:["journaltitle","title","author","date"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","langid","note","number","origlanguage","pages","pagination","pubstate","series","subtitle","titleaddon","translator","url","urldate","version","volume","annotation","keywords"]},"article-magazine":{order:2,biblatex:"article",csl:"article-magazine",required:["journaltitle","title","author","date"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","langid","note","number","origlanguage","pages","pagination","pubstate","series","subtitle","titleaddon","translator","url","urldate","version","volume","annotation","keywords"]},"article-newspaper":{order:3,biblatex:"article",csl:"article-newspaper",required:["journaltitle","title","author","date"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","langid","note","number","origlanguage","pages","pagination","pubstate","series","subtitle","titleaddon","translator","url","urldate","version","volume","annotation","keywords"]},"article-journal":{order:4,biblatex:"article",csl:"article-journal",required:["journaltitle","title","author","date"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","langid","note","number","origlanguage","pages","pagination","pubstate","series","subtitle","titleaddon","translator","url","urldate","version","volume","annotation","keywords"]},"post-weblog":{order:5,biblatex:"online",csl:"post-weblog",required:["date","title","url"],eitheror:["editor","author"],optional:["abstract","addendum","pubstate","subtitle","language","langid","urldate","titleaddon","version","note","organization","annotation","keywords"]},book:{order:10,biblatex:"book",csl:"book",required:["title","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origlanguage","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},mvbook:{order:11,biblatex:"mvbook",csl:"book",required:["title","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","note","number","origlanguage","pagetotal","bookpagination","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volumes","annotation","keywords"]},inbook:{order:12,biblatex:"inbook",csl:"chapter",required:["title","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","bookauthor","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},bookinbook:{order:13,biblatex:"bookinbook",csl:"chapter",required:["title","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","bookauthor","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},suppbook:{order:14,biblatex:"suppbook",csl:"chapter",required:["title","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","bookauthor","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editor","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},booklet:{order:15,biblatex:"booklet",csl:"pamphlet",required:["title","date"],eitheror:["editor","author"],optional:["abstract","titleaddon","addendum","pages","pagination","howpublished","type","pubstate","chapter","doi","subtitle","language","langid","location","url","urldate","pagetotal","bookpagination","note","eprint","eprintclass","eprinttype","annotation","keywords"]},collection:{order:20,biblatex:"collection",csl:"dataset",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origlanguage","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},mvcollection:{order:21,biblatex:"mvcollection",csl:"dataset",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","note","number","origlanguage","pagetotal","bookpagination","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volumes","annotation","keywords"]},incollection:{order:22,biblatex:"incollection",csl:"entry",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},suppcollection:{order:23,biblatex:"suppcollection",csl:"entry",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},post:{order:30,biblatex:"online",csl:"post",required:["date","title","url"],eitheror:["editor","author"],optional:["abstract","addendum","pubstate","subtitle","language","langid","urldate","titleaddon","version","note","organization","annotation","keywords"]},manual:{order:40,biblatex:"manual",csl:"book",required:["title","date"],eitheror:["editor","author"],optional:["abstract","addendum","chapter","doi","edition","eprint","eprintclass","eprinttype","isbn","language","langid","location","note","number","organization","pages","pagination","pagetotal","bookpagination","publisher","pubstate","series","subtitle","titleaddon","type","url","urldate","version","annotation","keywords"]},misc:{order:41,biblatex:"misc",csl:"entry",required:["title","date"],eitheror:["editor","author"],optional:["abstract","addendum","howpublished","type","pubstate","organization","doi","subtitle","language","langid","location","url","urldate","titleaddon","version","note","eprint","eprintclass","eprinttype","annotation","keywords"]},online:{order:42,biblatex:"online",csl:"webpage",required:["date","title","url"],eitheror:["editor","author"],optional:["abstract","addendum","pubstate","subtitle","language","langid","urldate","titleaddon","version","note","organization","annotation","keywords"]},patent:{order:43,biblatex:"patent",csl:"patent",required:["title","number","author","date"],eitheror:[],optional:["abstract","addendum","holder","location","pubstate","doi","subtitle","titleaddon","type","url","urldate","version","note","eprint","eprintclass","eprinttype","annotation","keywords"]},periodical:{order:50,biblatex:"periodical",csl:"book",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","volume","pubstate","number","series","issn","issue","issuesubtitle","issuetitle","doi","subtitle","editora","editorb","editorc","url","urldate","language","langid","note","eprint","eprintclass","eprinttype","annotation","keywords"]},suppperiodical:{order:51,biblatex:"suppperiodical",csl:"entry",required:["journaltitle","title","author","date"],eitheror:[],optional:["abstract","addendum","annotator","commentator","doi","editor","editora","editorb","editorc","eid","eprint","eprintclass","eprinttype","issn","issue","issuesubtitle","issuetitle","journalsubtitle","language","langid","note","number","origlanguage","pages","pagination","pubstate","series","subtitle","titleaddon","translator","url","urldate","version","volume","annotation","keywords"]},proceedings:{order:60,biblatex:"proceedings",csl:"entry",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","chapter","doi","eprint","eprintclass","eprinttype","eventdate","eventtitle","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","organization","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","subtitle","titleaddon","url","urldate","venue","volume","volumes","annotation","keywords"]},mvproceedings:{order:61,biblatex:"mvproceedings",csl:"entry",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","doi","eprint","eprintclass","eprinttype","eventdate","eventtitle","isbn","language","langid","location","note","number","organization","pagetotal","bookpagination","publisher","pubstate","series","subtitle","titleaddon","url","urldate","venue","volumes","annotation","keywords"]},inproceedings:{order:62,biblatex:"inproceedings",csl:"paper-conference",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","booksubtitle","booktitleaddon","chapter","doi","eprint","eprintclass","eprinttype","eventdate","eventtitle","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","organization","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","url","urldate","venue","volume","volumes","annotation","keywords"]},reference:{order:70,biblatex:"book",csl:"reference",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origlanguage","pages","pagination","pagetotal","bookpagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},mvreference:{order:71,biblatex:"mvreference",csl:"book",required:["editor","title","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","note","number","origlanguage","pagetotal","bookpagination","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volumes","annotation","keywords"]},inreference:{order:72,biblatex:"inreference",csl:"entry",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},"entry-encyclopedia":{order:73,biblatex:"inreference",csl:"entry-encyclopedia",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},"entry-dictionary":{order:74,biblatex:"inreference",csl:"entry-dictionary",required:["title","editor","booktitle","author","date"],eitheror:[],optional:["abstract","addendum","afterword","annotator","booksubtitle","booktitleaddon","chapter","commentator","doi","edition","editora","editorb","editorc","eprint","eprintclass","eprinttype","foreword","introduction","isbn","language","langid","location","mainsubtitle","maintitle","maintitleaddon","note","number","origlanguage","pages","pagination","part","publisher","pubstate","series","subtitle","titleaddon","translator","url","urldate","volume","volumes","annotation","keywords"]},report:{order:80,biblatex:"report",csl:"report",required:["author","title","type","institution","date"],eitheror:[],optional:["abstract","addendum","pages","pagination","pagetotal","bookpagination","pubstate","number","isrn","chapter","doi","subtitle","language","langid","location","url","urldate","titleaddon","version","note","eprint","eprintclass","eprinttype","annotation","keywords"]},thesis:{order:81,biblatex:"thesis",csl:"thesis",required:["author","title","type","institution","date"],eitheror:[],optional:["abstract","addendum","pages","pagination","pagetotal","bookpagination","pubstate","isbn","chapter","doi","subtitle","language","langid","location","url","urldate","titleaddon","note","eprint","eprintclass","eprinttype","annotation","keywords"]},unpublished:{order:90,biblatex:"unpublished",csl:"manuscript",required:["title","author","date"],eitheror:[],optional:["abstract","addendum","howpublished","pubstate","isbn","date","subtitle","language","langid","location","url","urldate","titleaddon","note","annotation","keywords"]}},nt=function(){function t(e){Y(this,t),this.string=e,this.type="None",this.valid=!0,this.values=[],this.uncertain=!1,this.approximate=!1,this.parts=[]}return et(t,[{key:"init",value:function(){return this.checkCertainty(),this.splitInterval(),{type:this.type,valid:this.valid,values:"Interval"===this.type?this.getPartValues():this.values,cleanedString:this.cleanString(),uncertain:this.uncertain,approximate:this.approximate}}},{key:"getPartValues",value:function(){return 0===this.parts.length?[]:1===this.parts.length?this.parts[0].values:[this.parts[0].values,this.parts[1].values]}},{key:"cleanString",value:function(){var t="";return this.parts.length?t=this.parts.map(function(t){return t.cleanString()}).join("/"):this.values&&(t=this.values.reduce(function(t,e,i){return 0===i?"number"==typeof e&&e>0?String(e).padStart(4,"0"):String(e):i<3?t+"-"+String(e).padStart(2,"0"):3===i?t+"T"+String(e).padStart(2,"0"):i<6?t+":"+String(e).padStart(2,"0"):""+t+e},"")),this.uncertain&&(t+="?"),this.approximate&&(t+="~"),t}},{key:"checkCertainty",value:function(){"~"===this.string.slice(-1)&&(this.approximate=!0,this.string=this.string.slice(0,-1)),"?"===this.string.slice(-1)&&(this.uncertain=!0,this.string=this.string.slice(0,-1))}},{key:"splitInterval",value:function(){var e=this,i=this.string.split("/");if(i.length>2)this.valid=!1;else if(2===i.length){this.type="Interval";var a=!1;i.forEach(function(i){var r=new t(i);r.init(),r.valid||"Open"===r.type?(e.parts.push(r),r.valid&&(a=!0)):e.valid=!1}),a||(this.valid=!1)}else this.splitDateParts()}},{key:"splitDateParts",value:function(){if(["",".."].includes(this.string))return this.valid=!1,this.values=[],void(this.type="Open");var e=this.string.replace(/^y/,"").split(/(?!^)-/);if(e.length>3)return void(this.valid=!1);var i=!0,a=e[0];if(!new RegExp("^-?[0-9]*u{0,2}$").test(a))return void(this.valid=!1);if("u"===a.slice(-1)){i=!1,this.type="Interval";var r=new t(a.replace(/u/g,"0"));r.init();var n=new t(a.replace(/u/g,"9"));n.init(),this.parts=[r,n],r.valid&&n.valid||(this.valid=!1)}else this.values=[parseInt(a)],this.type="Date";if(!(e.length<2)){var o=e[1];if(!i&&"uu"!==o)return void(this.valid=!1);var l=new RegExp("^[0-2][0-9]|uu$"),s=parseInt(o.replace("uu","01"));if(!l.test(o)||s<1||s>12&&s<21||s>24)return void(this.valid=!1);if("uu"===o&&(i=!1),i&&this.values.push(s),e.length<3)return void(s>12&&(this.type="Season"));if(s>12)return void(this.valid=!1);var u=e[2].split("T"),d=u[0];if(!i&&"uu"!==d)return void(this.valid=!1);var b=new RegExp("^[0-3][0-9]$|uu"),p=parseInt(d.replace("uu","01"));if(!b.test(o)||p<1||p>31)return void(this.valid=!1);if("uu"===d&&(i=!1),i){var c=new Date(a+"/"+o+"/"+d);if(c.getFullYear()!==parseInt(a)||c.getMonth()+1!==s||c.getDate()!==p)return void(this.valid=!1);this.values.push(p)}if(!(u.length<2)){if(!i)return void(this.valid=!1);var f=u[1].slice(0,8).split(":").map(function(t){return parseInt(t)});if(3!==f.length||f[0]<0||f[0]>23||f[1]<0||f[1]>59||f[2]<0||f[2]>59)return void(this.valid=!1);if(this.values=this.values.concat(f),8!==u[1].length){var g=u[1].slice(8);if("Z"===g)return void this.values.push("Z");var h=RegExp("^[+-][0-1][0-9]:[0-1][0-9]$"),m=g.split(":").map(function(t){return parseInt(t)});if(!h.test(g)||m[0]<-11||m[0]>14||m[1]<0||m[1]>59)return void(this.valid=!1);this.values.push(g)}}}}}]),t}(),ot={strong:{open:"<b>",close:"</b>"},em:{open:"<i>",close:"</i>"},sub:{open:"<sub>",close:"</sub>"},sup:{open:"<sup>",close:"</sup>"},smallcaps:{open:'<span style="font-variant:small-caps;">',close:"</span>"},nocase:{open:'<span class="nocase">',close:"</span>"},enquote:{open:"“",close:"”"},url:{open:"",close:""},undefined:{open:"[",close:"]"}},lt=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Y(this,t),this.bibDB=e,this.pks=i||J(e),this.cslDB={},this.errors=[]}return et(t,[{key:"parse",value:function(){for(var t in this.bibDB)-1!==this.pks.indexOf(t)&&(this.cslDB[t]=this.getCSLEntry(t),this.cslDB[t].id=t);return this.cslDB}},{key:"getCSLEntry",value:function(t){var e=this,i=this.bibDB[t],a={};if(!i.fields||!i.bib_type||!rt[i.bib_type])return a;for(var r in i.fields)!function(t){if(""!==i.fields[t]&&t in at&&"csl"in at[t]){var r=i.fields[t],n=at[t].type,o=at[t].csl,l=void 0;switch(n){case"f_date":(l=e._reformDate(r))&&(a[o]=l);break;case"f_integer":a[o]=e._reformInteger(r);break;case"f_key":a[o]=e._reformKey(r,t);break;case"f_literal":case"f_long_literal":a[o]=e._reformText(r);break;case"l_range":a[o]=e._reformRange(r);break;case"f_title":a[o]=e._reformText(r);break;case"f_uri":case"f_verbatim":a[o]=r;break;case"l_key":a[o]=r.map(function(i){return e._reformKey(i,t)}).join(" and ");break;case"l_literal":a[o]=r.map(function(t){return e._reformText(t)}).join(", ");break;case"l_name":a[o]=e._reformName(r);break;case"l_tag":a[o]=r.join(", ");break;default:console.warn("Unrecognized field type: "+n+"!")}}}(r);return a.type=rt[i.bib_type].csl,a}},{key:"_reformKey",value:function(t,e){if("string"==typeof t){var i=at[e];return Array.isArray(i.options)?t:i.options[t].csl}return this._reformText(t)}},{key:"_reformRange",value:function(t){var e=this;return t.map(function(t){return t.map(function(t){return e._reformText(t)}).join("--")}).join(",")}},{key:"_reformInteger",value:function(t){var e=this._reformText(t),i=parseInt(e);return e!==String(i)?e:i}},{key:"_reformText",value:function(t){var e=this,i="",a=[];return t.forEach(function(t){if("variable"===t.type)return i+=""+ot.undefined.open+t.attrs.variable+ot.undefined.close,void e.errors.push({type:"undefined_variable",variable:t.attrs.variable});var r=t.marks?t.marks.map(function(t){return t.type}):[],n=!1,o=[];a.forEach(function(t,e){t!=r[e]&&(n=!0),n&&o.push(ot[t].close)}),o.reverse(),i+=o.join("");var l=!1;r.forEach(function(t,e){t!=a[e]&&(l=!0),l&&(i+=ot[t].open)}),i+=t.text,a=r}),a.slice().reverse().forEach(function(t){i+=ot[t].close}),i}},{key:"_reformDate",value:function(t){var e=i(t),a={};if(!e.valid)return!1;if(e.values.length>1&&Array.isArray(e.values[0])&&Array.isArray(e.values[1])){var r=e.values[0],n=e.values[1],o=[r.slice(0,3).map(function(t){return parseInt(t)}),n.slice(0,3).map(function(t){return parseInt(t)})];a["date-parts"]=o}else{var l=e.values.slice(0,3).map(function(t){return parseInt(t)});a["date-parts"]=[l],"Interval"===e.type&&(a.circa=!0)}return(e.uncertain||e.approximate)&&(a.circa=!0),a}},{key:"_reformName",value:function(t){var e=this;return t.map(function(t){var i={};if(t.literal){var a=e._reformText(t.literal);if(!a.length)return!1;i.literal=a}else i.given=e._reformText(t.given),i.family=e._reformText(t.family),t.suffix&&(i.suffix=e._reformText(t.suffix)),t.prefix&&(t.useprefix?i["non-dropping-particle"]=e._reformText(t.prefix):i["dropping-particle"]=e._reformText(t.prefix)),i.family=e._reformText(t.family);return i}).filter(function(t){return t})}},{key:"output",get:function(){return console.warn("CSLExporter.output will be deprecated in biblatex-csl-converter 2.x. Use CSLExporter.parse() instead."),this.parse()}}]),t}();a.CSLExporter=lt}();
